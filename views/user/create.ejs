<!-- Create User Form -->
<div class="data-container">
    <div class="data-header">
        <h3>Create New User</h3>
    </div>

    <form action="/users" method="POST" class="form">
        <div class="form-group">
            <label for="username">Username <span class="required-indicator">*</span></label>
            <input
                    type="text"
                    id="username"
                    name="username"
                    class="form-control <%= typeof errors !== 'undefined' && errors.find(err => err.param === 'username') ? 'is-invalid' : '' %>"
                    value="<%= typeof user !== 'undefined' ? user.username : '' %>"
                    required
                    minlength="3"
                    maxlength="30"
            >
            <small class="form-text text-muted">Username must be at least 3 characters long</small>
        </div>

        <div class="form-group">
            <label for="password">Password <span class="required-indicator">*</span></label>
            <input
                    type="password"
                    id="password"
                    name="password"
                    class="form-control <%= typeof errors !== 'undefined' && errors.find(err => err.param === 'password') ? 'is-invalid' : '' %>"
                    required
                    minlength="6"
            >
            <small class="form-text text-muted">Password must be at least 6 characters long</small>
        </div>

        <div class="form-group">
            <label for="role">Role</label>
            <select id="role" name="role" class="form-control">
                <option value="Viewer" <%= typeof user !== 'undefined' && user.role === 'Viewer' ? 'selected' : '' %>>Viewer (Read Only)</option>
                <option value="Loader" <%= typeof user !== 'undefined' && user.role === 'Loader' ? 'selected' : '' %>>Loader (Inventory & Load Management)</option>
                <option value="Admin" <%= typeof user !== 'undefined' && user.role === 'Admin' ? 'selected' : '' %>>Administrator</option>
            </select>
            <small class="form-text text-muted">
                <strong>Viewer:</strong> Can view all data but cannot make changes<br>
                <strong>Loader:</strong> Can manage inventory and truck loads<br>
                <strong>Administrator:</strong> Full access to all features
            </small>
        </div>

        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" name="status" class="form-control">
                <option value="Active" <%= typeof user !== 'undefined' && user.status === 'Active' ? 'selected' : '' %>>Active</option>
                <option value="Inactive" <%= typeof user !== 'undefined' && user.status === 'Inactive' ? 'selected' : '' %>>Inactive</option>
            </select>
        </div>

        <div class="button-group">
            <a href="/users" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Cancel
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save User
            </button>
        </div>
    </form>
</div>